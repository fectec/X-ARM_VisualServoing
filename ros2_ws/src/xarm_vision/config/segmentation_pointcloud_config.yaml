# Configuration file for image segmentation and point cloud generation
# Place this file in your package's config directory

image_segmentation_node:
  ros__parameters:
    # Camera topics
    rgb_topic: "/k4a/rgb/image_raw"
    depth_topic: "/k4a/depth_to_rgb/image_raw"
    use_compressed: false
    
    # Processing parameters
    update_rate: 30.0
    debug_view: true
    
    # HSV color filtering (adjust these for your target object)
    # Current values are for black objects
    hsv_hue_low: 0
    hsv_hue_high: 179
    hsv_saturation_low: 0
    hsv_saturation_high: 255
    hsv_value_low: 0
    hsv_value_high: 50
    
    # Alternative HSV ranges for common objects:
    # Green objects: hue_low: 40, hue_high: 80, sat_low: 50, sat_high: 255, val_low: 50, val_high: 255
    # Red objects: hue_low: 0, hue_high: 10, sat_low: 100, sat_high: 255, val_low: 100, val_high: 255
    # Blue objects: hue_low: 100, hue_high: 130, sat_low: 50, sat_high: 255, val_low: 50, val_high: 255
    
    # Depth filtering (in millimeters for Azure Kinect)
    depth_low: 250      # 25cm
    depth_high: 800     # 80cm
    depth_scale: 1.0
    auto_convert_depth: true
    
    # Connected components filtering
    min_component_area: 1000
    connectivity: 8  # 4 or 8
    filter_largest_component: true

pointcloud_generator_node:
  ros__parameters:
    # Camera intrinsics file - now supports both YAML (OpenCV) and JSON formats
    camera_intrinsics_file: "$(find-pkg-share xarm_vision)/config/ost.yaml"
    
    # Point cloud generation settings
    depth_scale: 1000.0  # Convert mm to meters
    auto_generate: true
    publish_rate: 10.0   # Hz
    
    # Filtering parameters
    max_depth: 2.0       # meters
    min_depth: 0.2       # meters
    voxel_size: 0.002    # meters (2mm) - set to 0 to disable downsampling
    
    # Outlier removal
    outlier_removal: true
    statistical_outlier_nb_neighbors: 20
    statistical_outlier_std_ratio: 2.0

pointcloud_visualizer_node:
  ros__parameters:
    # Visualization backend: 'open3d', 'matplotlib', or 'both'
    visualizer_backend: "open3d"
    
    # Display settings
    update_rate: 10.0
    max_points_display: 10000
    point_size: 2.0
    background_color: [0.1, 0.1, 0.1]  # Dark gray
    auto_rotate: false
    
    # Snapshot settings
    save_snapshots: false
    snapshot_directory: "/tmp/pointcloud_snapshots"